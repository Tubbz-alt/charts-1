suite: test api role
templates:
  - objectscale-api-role.yaml
tests:
  - it: should not create this role, when in PSP
    set:
      global.platform: "VMware"
    asserts:
      - hasDocuments:
          count: 0
  - it: should create a role, when not in PSP
    asserts:
      - isKind:
          of: Role
  - it: should have a name objectscale-api
    asserts:
      - equal:
          path: metadata.name
          value: objectscale-api
