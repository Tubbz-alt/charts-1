suite: test psp wcp namespace
templates:
  - persistent-services-platform-wcp-namespace.yaml
tests:
  - it: should create a wcp namespace
    set:
      global.platform: "VMware"
    asserts:
      - isKind:
          of: WCPNamespace
  - it: should have the correct name
    set:
      global.platform: "VMware"
    asserts:
      - equal:
          path: metadata.name
          value: dellemc-objectscale-system
  - it: should have the correct local storage policy configured
    set:
      global.platform: "VMware"
    asserts:
      - equal:
          path: spec.spbmPolicies[0]
          value: dellemc-objectscale-local
  - it: should have the correct highly available storage policy configured
    set:
      global.platform: "VMware"
    asserts:
      - equal:
          path: spec.spbmPolicies[1]
          value: dellemc-objectscale-highly-available
  - it: should be nil
    assert:
      - nil
